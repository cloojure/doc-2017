<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>tupelo.datomic documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Tupelo 0.1.40 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tupelo</span></div></div></li><li class="depth-2 branch"><a href="tupelo.base64.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>base64</span></div></a></li><li class="depth-2 branch"><a href="tupelo.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="tupelo.csv.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csv</span></div></a></li><li class="depth-2 branch current"><a href="tupelo.datomic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datomic</span></div></a></li><li class="depth-2 branch"><a href="tupelo.explicit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>explicit</span></div></a></li><li class="depth-2 branch"><a href="tupelo.misc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>misc</span></div></a></li><li class="depth-2 branch"><a href="tupelo.parse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parse</span></div></a></li><li class="depth-2 branch"><a href="tupelo.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-2"><a href="tupelo.y64.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>y64</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tupelo.datomic.html#var-datom-map"><div class="inner"><span>datom-map</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-DatomMap"><div class="inner"><span>DatomMap</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-datoms"><div class="inner"><span>datoms</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Eid"><div class="inner"><span>Eid</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-eid-.3Eident"><div class="inner"><span>eid-&gt;ident</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-eids"><div class="inner"><span>eids</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-entity-map"><div class="inner"><span>entity-map</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-entity-map-sort"><div class="inner"><span>entity-map-sort</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-EntitySpec"><div class="inner"><span>EntitySpec</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-HashSetGeneric"><div class="inner"><span>HashSetGeneric</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-KeyMap"><div class="inner"><span>KeyMap</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-LookupRef"><div class="inner"><span>LookupRef</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Map"><div class="inner"><span>Map</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-new-attribute"><div class="inner"><span>new-attribute</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-new-entity"><div class="inner"><span>new-entity</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-new-enum"><div class="inner"><span>new-enum</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-new-partition"><div class="inner"><span>new-partition</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-partition-name"><div class="inner"><span>partition-name</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-result-only"><div class="inner"><span>result-only</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-result-scalar"><div class="inner"><span>result-scalar</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-result-set"><div class="inner"><span>result-set</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-result-set-sort"><div class="inner"><span>result-set-sort</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-retraction"><div class="inner"><span>retraction</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-retraction-entity"><div class="inner"><span>retraction-entity</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-special-attrvals"><div class="inner"><span>special-attrvals</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-transact"><div class="inner"><span>transact</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-transactions"><div class="inner"><span>transactions</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Tuple"><div class="inner"><span>Tuple</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-TupleList"><div class="inner"><span>TupleList</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-TupleMap"><div class="inner"><span>TupleMap</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-TupleSet"><div class="inner"><span>TupleSet</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-tx-datoms"><div class="inner"><span>tx-datoms</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-txid"><div class="inner"><span>txid</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-TxResult"><div class="inner"><span>TxResult</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Vec1"><div class="inner"><span>Vec1</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Vec2"><div class="inner"><span>Vec2</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Vec3"><div class="inner"><span>Vec3</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Vec4"><div class="inner"><span>Vec4</span></div></a></li><li class="depth-1"><a href="tupelo.datomic.html#var-Vec5"><div class="inner"><span>Vec5</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">tupelo.datomic</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-datom-map"><h3>datom-map</h3><div class="usage"><code>(datom-map datom)</code></div><div class="doc"><pre class="plaintext">Inputs: [datom :- s/Any]
Returns: DatomMap

Returns a plain of Clojure map of an datom&apos;s attribute-value pairs. 
 A datom map is structured as:

    { :e        entity id (eid)
      :a        attribute eid
      :v        value
      :tx       transaction eid
      :added    true/false (assertion/retraction) }
 </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L325">view source</a></div></div><div class="public anchor" id="var-DatomMap"><h3>DatomMap</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The Clojure map representation of a Datom.
</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L41">view source</a></div></div><div class="public anchor" id="var-datoms"><h3>datoms</h3><div class="usage"><code>(datoms db index &amp; components)</code></div><div class="doc"><pre class="plaintext">Inputs: [db :- s/Any index :- s/Keyword &amp; components]
Returns: [DatomMap]

Returns a sequence of Clojure maps of an datom&apos;s attribute-value pairs. 
 A datom map is structured as:

    { :e        entity id (eid)
      :a        attribute eid
      :v        value
      :tx       transaction eid
      :added    true/false (assertion/retraction) }

 Like (d/datoms ...), but returns a seq of plain Clojure maps.  </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L343">view source</a></div></div><div class="public anchor" id="var-Eid"><h3>Eid</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Each entity in the DB is uniquely specified its Entity ID (EID).  Indeed, allocation of a unique
EID is what &apos;creates&apos; an entity in the DB.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L17">view source</a></div></div><div class="public anchor" id="var-eid-.3Eident"><h3>eid-&gt;ident</h3><div class="usage"><code>(eid-&gt;ident db-val eid-val)</code></div><div class="doc"><pre class="plaintext">Inputs: [db-val :- s/Any eid-val :- Eid]
Returns: s/Keyword

Returns the keyword ident value given an EID value</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L360">view source</a></div></div><div class="public anchor" id="var-eids"><h3>eids</h3><div class="usage"><code>(eids tx-result)</code></div><div class="doc"><pre class="plaintext">Inputs: [tx-result :- TxResult]
Returns: [long]

Returns a collection of the EIDs created in a transaction.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L401">view source</a></div></div><div class="public anchor" id="var-entity-map"><h3>entity-map</h3><div class="usage"><code>(entity-map db-val entity-spec)</code></div><div class="doc"><pre class="plaintext">Inputs: [db-val :- datomic.db.Db entity-spec :- EntitySpec]
Returns: KeyMap

Returns a map of an entity&apos;s attribute-value pairs. A simpler, eager version of datomic/entity.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L312">view source</a></div></div><div class="public anchor" id="var-entity-map-sort"><h3>entity-map-sort</h3><div class="usage"><code>(entity-map-sort db-val entity-spec)</code></div><div class="doc"><pre class="plaintext">Inputs: [db-val :- datomic.db.Db entity-spec :- EntitySpec]
Returns: KeyMap

Returns a map of an entity&apos;s attribute-value pairs. A simpler, eager version of datomic/entity.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L318">view source</a></div></div><div class="public anchor" id="var-EntitySpec"><h3>EntitySpec</h3><div class="usage"></div><div class="doc"><pre class="plaintext">An EntitySpec is used to uniquely specify an entity in the DB. It consists of 
either an EID or a LookupRef.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L35">view source</a></div></div><div class="public anchor" id="var-HashSetGeneric"><h3>HashSetGeneric</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Either a Clojure hash-set or a java.util.HashSet
</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L22">view source</a></div></div><div class="public anchor" id="var-KeyMap"><h3>KeyMap</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L15">view source</a></div></div><div class="public anchor" id="var-LookupRef"><h3>LookupRef</h3><div class="usage"></div><div class="doc"><pre class="plaintext">If an entity has an attribute with either :db.unique/value or :db.unique/identity, that entity
can be uniquely specified using a lookup-ref (LookupRef). A lookup-ref is an attribute-value pair
expressed as a tuple:  [ &lt;attribute&gt; &lt;value&gt; ]</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L28">view source</a></div></div><div class="public anchor" id="var-Map"><h3>Map</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L14">view source</a></div></div><div class="public anchor" id="var-new-attribute"><h3>new-attribute</h3><div class="usage"><code>(new-attribute ident value-type &amp; options)</code></div><div class="doc"><pre class="plaintext">Inputs: [ident :- s/Keyword value-type :- s/Any &amp; options]
Returns: KeyMap

Returns the tx-data to create a new attribute in the DB.  Usage:

  (d/transact *conn* [
    (attribute ident value-type &amp; options)
  ] )

 The first 2 params are required. Other params are optional and will use normal Datomic default
 values (false or nil) if omitted. An attribute is assumed to be :db.cardinality/one unless
 otherwise specified.  Optional values are:

    :db.unique/value
    :db.unique/identity
    :db.cardinality/one     &lt;- assumed by default
    :db.cardinality/many
    :db/index
    :db/fulltext
    :db/isComponent
    :db/noHistory
    :db/doc                 &lt;- *** currently unimplemented ***
</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L139">view source</a></div></div><div class="public anchor" id="var-new-entity"><h3>new-entity</h3><div class="usage"><code>(new-entity attr-val-map)</code><code>(new-entity -partition attr-val-map)</code></div><div class="doc"><pre class="plaintext">Inputs: ([attr-val-map :- KeyMap] [-partition :- s/Keyword attr-val-map :- KeyMap])
Returns: KeyMap

Returns the tx-data to create a new entity in the DB. Usage:

  (d/transact *conn* [
    (new-entity attr-val-map)                 ; default partition -&gt; :db.part/user 
    (new-entity partition attr-val-map)       ; user-specified partition
  ] )

 where attr-val-map is a Clojure map containing attribute-value pairs to be added to the new
 entity.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L190">view source</a></div></div><div class="public anchor" id="var-new-enum"><h3>new-enum</h3><div class="usage"><code>(new-enum ident)</code></div><div class="doc"><pre class="plaintext">Inputs: [ident :- s/Keyword]
Returns: KeyMap

Returns the tx-data to create a new enumeration entity in the DB. Usage:

  (d/transact *conn* [
    (new-enum ident)
  ] )

where ident is the (keyword) name for the new enumeration entity.  </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L207">view source</a></div></div><div class="public anchor" id="var-new-partition"><h3>new-partition</h3><div class="usage"><code>(new-partition ident)</code></div><div class="doc"><pre class="plaintext">Inputs: [ident :- s/Keyword]
Returns: KeyMap

Returns the tx-data to create a new partition in the DB. Usage:

  (d/transact *conn* [
    (partition ident)
  ] )
</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L125">view source</a></div></div><div class="public anchor" id="var-partition-name"><h3>partition-name</h3><div class="usage"><code>(partition-name db-val entity-spec)</code></div><div class="doc"><pre class="plaintext">Inputs: [db-val :- datomic.db.Db entity-spec :- EntitySpec]
Returns: s/Keyword

Returns the name of a DB partition (its :db/ident value)</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L387">view source</a></div></div><div class="public anchor" id="var-result-only"><h3>result-only</h3><div class="usage"><code>(result-only raw-resultset)</code></div><div class="doc"><pre class="plaintext">Inputs: [raw-resultset :- HashSetGeneric]
Returns: [s/Any]

Returns a single tuple result built from the output of a Datomic query using the Entity API</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L292">view source</a></div></div><div class="public anchor" id="var-result-scalar"><h3>result-scalar</h3><div class="usage"><code>(result-scalar raw-resultset)</code></div><div class="doc"><pre class="plaintext">Inputs: [raw-resultset :- HashSetGeneric]
Returns: s/Any

Returns a single scalar result built from the output of a Datomic query using the Entity API</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L302">view source</a></div></div><div class="public anchor" id="var-result-set"><h3>result-set</h3><div class="usage"><code>(result-set raw-resultset)</code></div><div class="doc"><pre class="plaintext">Inputs: [raw-resultset :- HashSetGeneric]
Returns: TupleSet

Returns a TupleSet (hash-set of tuples) built from the output of a Datomic query using the Entity API</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L282">view source</a></div></div><div class="public anchor" id="var-result-set-sort"><h3>result-set-sort</h3><div class="usage"><code>(result-set-sort raw-resultset)</code></div><div class="doc"><pre class="plaintext">Inputs: [raw-resultset :- HashSetGeneric]
Returns: TupleSet

Returns a TupleSet (hash-set of tuples) built from the output of a Datomic query using the Entity API</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L287">view source</a></div></div><div class="public anchor" id="var-retraction"><h3>retraction</h3><div class="usage"><code>(retraction entity-spec attribute value)</code></div><div class="doc"><pre class="plaintext">Inputs: [entity-spec :- EntitySpec attribute :- s/Keyword value :- s/Any]
Returns: Vec4

Returns the tx-data to retract an attribute-value pair for an entity. Usage:

  (d/transact *conn* [
    (retraction entity-spec attribute value)
  ] )

 where the attribute-value pair must exist for the entity or the retraction will fail.  </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L237">view source</a></div></div><div class="public anchor" id="var-retraction-entity"><h3>retraction-entity</h3><div class="usage"><code>(retraction-entity entity-spec)</code></div><div class="doc"><pre class="plaintext">Inputs: [entity-spec :- EntitySpec]
Returns: Vec2

Returns the tx-data to retract all attribute-value pairs for an entity, as well as all references
 to the entity by other entities. Usage:
 
  (d/transact *conn* [
    (retraction-entity entity-spec)
  ] )
 
If the retracted entity refers to any other entity through an attribute with :db/isComponent=true,
the referenced entity will be recursively retracted as well.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L250">view source</a></div></div><div class="public anchor" id="var-special-attrvals"><h3>special-attrvals</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A map that defines the set of permissible values for use in attribute definition.

User-defined attributes are special entities in Datomic. They are stored in the :db.part/db
partition, and are defined by special attributes that are built-in to Datomic (this is analgous to
the special forms that are built-in to Clojure). The root attributes are named by the following
keywords (all in the &apos;db&apos; namespace):

  :db/id
  :db/ident
  :db/valueType
  :db/cardinality
  :db/unique
  :db/doc
  :db/index
  :db/fulltext
  :db/isComponent
  :db/noHistory

For each of these special attributes, this map defines the permissible values used for specifying
user-defined attributes. Most special attributes are defined by a set of permissible keyword
values. Permissible values for other special attributes are defined by a predicate function.  </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L82">view source</a></div></div><div class="public anchor" id="var-transact"><h3>transact</h3><div class="usage"><code>(transact conn &amp; tx-specs)</code></div><div class="doc"><pre class="plaintext">Inputs: [conn &amp; tx-specs]
Returns: s/Any

Like (d/transact [...] ), but does not require wrapping everything in a Clojure vector. Usage:
 
  (t/transact *conn*
    (t/new-entity ident)
    (t/update entity-spec-1 attr-val-map-1)
    (t/update entity-spec-2 attr-val-map-2))
 </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L264">view source</a></div></div><div class="public anchor" id="var-transactions"><h3>transactions</h3><div class="usage"><code>(transactions db-val)</code></div><div class="doc"><pre class="plaintext">Inputs: [db-val :- s/Any]
Returns: [KeyMap]

Returns a lazy-seq of entity-maps for all DB transactions</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L393">view source</a></div></div><div class="public anchor" id="var-Tuple"><h3>Tuple</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A specific type of sequential collection, typically a vector of constant length where each
element has a pre-defined interpretation.</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L53">view source</a></div></div><div class="public anchor" id="var-TupleList"><h3>TupleList</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A sequence of tuples (typically a vector of vectors)
</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L58">view source</a></div></div><div class="public anchor" id="var-TupleMap"><h3>TupleMap</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L72">view source</a></div></div><div class="public anchor" id="var-TupleSet"><h3>TupleSet</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The result of any Datomic using the Entity API is logically a hash-set of tuples (vectors).  
The contents and order of each tuple is determined by the find clause:

     ----- query -----                         ----- tuples -----
   (d/q &apos;{:find [?e ?name ?age] ...)     -&gt;    [?e ?name ?age] 

</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L62">view source</a></div></div><div class="public anchor" id="var-tx-datoms"><h3>tx-datoms</h3><div class="usage"><code>(tx-datoms db-val tx-result)</code></div><div class="doc"><pre class="plaintext">Inputs: [db-val :- s/Any tx-result :- TxResult]
Returns: s/Any

Returns a seq of datom-maps from a TxResult</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L371">view source</a></div></div><div class="public anchor" id="var-txid"><h3>txid</h3><div class="usage"><code>(txid tx-result)</code></div><div class="doc"><pre class="plaintext">Inputs: [tx-result :- TxResult]
Returns: Eid

Returns the EID of a transaction</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L406">view source</a></div></div><div class="public anchor" id="var-TxResult"><h3>TxResult</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A map returned by a successful transaction. Contains the keys 
:db-before, :db-after, :tx-data, and :tempids</pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L45">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update entity-spec attr-val-map)</code></div><div class="doc"><pre class="plaintext">Inputs: [entity-spec :- EntitySpec attr-val-map :- KeyMap]
Returns: KeyMap

Returns the tx-data to update an existing entity  Usage:

  (d/transact *conn* [
    (update entity-spec attr-val-map)
  ] )

 where attr-val-map is a Clojure map containing attribute-value pairs to be added to the new
 entity.  For attributes with :db.cardinality/one, the previous value will be (automatically)
 retracted prior to the insertion of the new value. For attributes with :db.cardinality/many, the
 new value will be accumulated into the current set of values.  </pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L222">view source</a></div></div><div class="public anchor" id="var-Vec1"><h3>Vec1</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L74">view source</a></div></div><div class="public anchor" id="var-Vec2"><h3>Vec2</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L75">view source</a></div></div><div class="public anchor" id="var-Vec3"><h3>Vec3</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L76">view source</a></div></div><div class="public anchor" id="var-Vec4"><h3>Vec4</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L77">view source</a></div></div><div class="public anchor" id="var-Vec5"><h3>Vec5</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cloojure/tupelo/blob/master/src/tupelo/datomic.clj#L78">view source</a></div></div></div></body></html>